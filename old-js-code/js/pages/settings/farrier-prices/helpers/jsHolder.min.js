// @ts-nocheck
function populateFarrierPricesValues(e){if(e){let t=["trim","shoes"].map((e=>`[id*='${e}']`)).join(", "),r=document.querySelectorAll(t);for(let t of r)t.value="!==e[hyphenToUnderscore(t.id)]&&"0.00"!==e[hyphenToUnderscore(t.id)]?e[hyphenToUnderscore(t.id)]:",t.value&&t.classList.add("w3-light-green");const a=e.accessories,l=["casting","clips","rockers","sedation"];l.map((e=>`[id='${e}']`)).join(", ");for(let e in a)if(a.hasOwnProperty(e)){const t=a[e];if(l.includes(e))t.forEach((t=>{let r=document.getElementById(e);r.value="!==t.productCost&&"0.00"!==t.productCost?t.productCost:",r.value&&r.classList.add("w3-light-green")}));else if(a[e].length>0){const t=a[e].length,r=`num-${e}`,l=document.getElementById(`display-${e}`),n=document.getElementById(r);n.value=t,n.classList.add("w3-light-green");let s=1;for(const t of a[e])l.appendChild(displayAccessoryInputAndCost(s,e,t.productName,t.productCost)),s++}}}}!async function(){mySuccess(fm,"Loading Values...","w3-text-blue");let e=!1;try{const e=await manageUser.getMileageCharges();e&&populateMileageChargesValues(e)}catch(t){"Local settings storage is not properly set up."===t.message&&(e=!0)}try{const e=await manageUser.getFarrierPrices(getUserInfoAPI,{getFarrierPrices:!0});e&&populateFarrierPricesValues(e)}catch(t){"Local settings storage is not properly set up."===t.message&&(e=!0)}clearMsg({container:fm}),e&&(myError(fm,"Local settings storage is not properly set up.<br>Please navigate to the home page.<br>This should automatically set up your local settings storage.<br>If this does not work, Please submit a new Help Desk Ticket for this issue."),submitButton.disabled=!0)}();const accessoryObject={pads:{display:displayPads,element:numPads,name:"pads"},packing:{display:displayPacking,element:numPacking,name:"packing"},wedges:{display:displayWedges,element:numWedges,name:"wedges"}};for(const e in accessoryObject){const t=accessoryObject[e];addListener(t.element,"input",(e=>displayNumberedInputs(e,t.display,t.name)))}async function displayNumberedInputs(e,t,r){const a=document.createDocumentFragment(),l="===e.target.value?null:Number(e.target.value),n=t.children.length;if(null!==l){if(0===n&&l>0)for(let e=1;e<=l;e++)a.appendChild(displayAccessoryInputAndCost(e,r));else if(n>0&&l>n){const e=l-n;for(let t=n;t<e+n;t++)a.appendChild(displayAccessoryInputAndCost(t+1,r))}else if(n>0&&l<n&&l>0)for(let e=n;e>l;e--)document.getElementById(`block-${e}`).remove();else 0===l&&(t.innerHTML=");t.appendChild(a)}}async function deleteMileageRange(e){if(confirm("Are you sure you want to delete this mileage range?")){e.target.parentElement.parentElement.parentElement.remove();const t=fuelRangeContainer.children;for(let e=0;e<t.length;e++){t[e].children[0].childNodes[0].textContent=`Mileage Range ${e+1}`;let r=t[e].children[1];r.querySelector('input[id^="mileage-range-"]').id=`mileage-range-${e+1}`,r.querySelector('input[id^="mileage-range-"]').name=`mileage_range_${e+1}`,r.querySelector('input[id^="fuel-cost-"]').id=`fuel-cost-${e+1}`,r.querySelector('input[id^="fuel-cost-"]').name=`fuel_cost_${e+1}`}fuelRanges.value=t.length,makeInputEleGreen(fpf)}}function makeInputEleGreen(e){Array.from(e.elements).forEach((e=>{"submit"!==e.name&&(e.value&&"!==e.value?e.classList.add("w3-light-green"):e.classList.remove("w3-light-green"))}))}function addFuelRangeInputs(e){const t=e.target.value,r=document.createDocumentFragment();"0"!==t&&"!==t||e.target.classList.remove("w3-light-green");for(let e=0;e<t;e++){const t=buildEle({type:"div",myClass:["w3-row","w3-padding-small"]}),a=buildEle({type:"div",myClass:["w3-col","m6"],text:`Mileage Range ${e+1}:`}),l=buildEle({type:"div",myClass:["w3-col","m6"]}),n=buildEle({type:"p"}),s=buildEle({type:"label",attributes:{for:`mileage-range-${e+1}`},text:"Mileage Range"}),i=buildEle({type:"span",myClass:["w3-small"],text:"(format: 50-59)"}),o=buildEle({type:"input",attributes:{id:`mileage-range-${e+1}`,type:"text",title:"Mileage Range: e.g. 50-59",placeholder:"Mileage Range: 50-59",name:`mileage_range_${e+1}`,required:"required"},myClass:["w3-input","w3-border"]}),c=buildEle({type:"div",attributes:{id:`mileage-range-error-${e+1}`}});o.addEventListener("input",(e=>checkMileageRangeFormat(e,c)));const d=buildEle({type:"p"}),u=buildEle({type:"label",attributes:{for:`fuel-cost-${e+1}`},text:"Fuel Cost:"}),p=buildEle({type:"input",attributes:{id:`fuel-cost-${e+1}`,type:"number",title:"Fuel Cost",placeholder:"Fuel Cost",name:`fuel_cost_${e+1}`,required:"required"},myClass:["w3-input","w3-border"]}),g=buildEle({type:"div",attributes:{id:`fuel-cost-error-${e+1}`}});p.addEventListener("input",(e=>checkFuelCostFormat(e,g))),l.appendChild(n),n.appendChild(s),n.appendChild(i),n.appendChild(o),n.appendChild(c),l.appendChild(d),d.appendChild(u),d.appendChild(p),d.appendChild(g),t.appendChild(a),t.appendChild(l),r.appendChild(t)}fuelRangeContainer.innerHTML=",fuelRangeContainer.appendChild(r)}function checkMileageRangeFormat(e,t){const r=e.target.value;let a=r.match(/^(\d{1,3})-(\d{1,3}\+?)$/);if("===r)clearMsg({container:t,input:e.target});else if(a){if(parseInt(a[1],10)<parseInt(a[2],10)){checkForDuplicateRanges(r,e.target)?(myError(t,"This range is already being used.",e.target),checkFormForErrors()):(clearMsg({container:t,input:e.target}),checkFormForErrors())}else myError(t,"First number must be smaller than second number.",e.target),checkFormForErrors()}else myError(t,"Please use the correct format: xx-xx",e.target),checkFormForErrors()}function checkFuelCostFormat(e,t){isNumeric(e.target.value)?(clearMsg({container:t,input:e.target}),checkFormForErrors()):(myError(t,"Fuel cost must be a number.",e.target),checkFormForErrors())}function checkFormForErrors(){fpf.querySelectorAll(".error").length>0?submitButton.disabled=!0:submitButton.disabled=!1}function checkForDuplicateRanges(e,t){const r=fpf.querySelectorAll('input[id^="mileage-range-"]');for(let a of r)if(a!==t&&e===a.value)return!0;return!1}deleteRange&&deleteRange.length>0&&deleteRange.forEach((e=>{e.addEventListener("click",deleteMileageRange)}));