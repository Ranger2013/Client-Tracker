// @ts-nocheck
import checkAppointment from"../../../../utils/appointment-block/checkAppointment.js";import{myError,mySuccess,top}from"../../../../utils/dom/domUtils.js";import{addListener}from"../../../../utils/event-listeners/listeners.js";import showListOfHorses from"./helpers/showListOfHorses.js";import updateHorseListSelectElements from"./helpers/updateHorseListSelectElements.js";export default async function addTrimming({clientInfo:e}){try{checkAppointment({trimDate:"next-trim-date",appBlock:"appointment-block",projAppBlock:"projected-appointment-block",clientInfo:e}),addListener("number-horses","input",(async r=>{try{await showListOfHorses({evt:r,horseListContainer:"number-horse-container",primaryKey:e.primaryKey}),await updateHorseListSelectElements()}catch(e){const{handleError:r}=await import("../../../../utils/error-messages/handleError.js");await r("numberHorsesInputError","Number horses Input error: ",e,"We encountered an error. Unable to build the required page.","number-horse-container")}})),addListener("next-trim-date","change",(async()=>{try{checkAppointment({trimDate:"next-trim-date",appBlock:"appointment-block",projAppBlock:"projected-appointment-block",clientInfo:e})}catch(e){const{handleError:r}=await import("../../../../utils/error-messages/handleError.js");await r("nextTrimDateEventListenerError","Next trim date event listener error: ",e,"We encountered an error. Unable to show the booked appointments.","appointment-block")}})),addListener("trimming-form","submit",(async r=>{r.preventDefault();try{top();const{default:t}=await import("./handleTrimmingFormSubmission.js"),o=await t(r,e),n=document.getElementById("number-horse-container");let s="";"success"===o.status?("receipt-sent"!==o.receipt_status&&"no-receipt-sent"!==o.receipt_status||(s+=o.receipt_msg),mySuccess("form-msg",o.msg+s),n.innerHTML="",r.target.reset()):("validation-error"===o.status||"error"===o.status)&&myError("form-msg",o.msg)}catch(e){const{handleError:r}=await import("../../../../utils/error-messages/handleError.js");await r("addTrimmingError","Add trimming error: ",e,"We encountered an error. Unable to add trimming/shoeing at this time.","form-msg")}}))}catch(e){const{handleError:r}=await import("../../../../utils/error-messages/handleError.js");await r("buildAddTrimmingPageError","Build add trimming page error: ",e,"We encountered an error. Unable to add trimming/shoeing at this time.","form-msg")}}