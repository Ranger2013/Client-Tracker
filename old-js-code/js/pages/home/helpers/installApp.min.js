// @ts-nocheck
import IndexedDBOperations from"../../../classes/IndexedDBOperations";import{installPromptState}from"../../../classes/InstallPromptManager.js";import{closeModal}from"../../../utils/modal/openModal.js";import updateUserSettings from"./updateUserSettings.js";const indexed=new IndexedDBOperations;export default async function installApp(t){console.log("In installApp: evt.target: ",t.target);try{const t=installPromptState.getPrompt();if(t){t.prompt();if("accepted"===(await t.userChoice).outcome){const t=await indexed.openDBPromise(),e=await indexed.getAllStorePromise(t,indexed.stores.USERSETTINGS);await updateUserSettings("installed","installApp",e[0])}installPromptState.clearPrompt()}}catch(t){const{default:e}=await import("../../../utils/error-messages/errorLogs.js");await e("installAppError.txt","App installation error.",t)}}