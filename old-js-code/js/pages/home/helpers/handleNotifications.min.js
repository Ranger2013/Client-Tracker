// @ts-nocheck
import{getValidationToken}from"../../../tracker.js";import openModal from"../../../utils/modal/openModal.js";import{getNotificationsAPI}from"../../../utils/network/apiEndpoints.js";import{fetchData}from"../../../utils/network/network.js";import getListenersForNotifications from"./getListenersForNotifications.js";export default async function handleNotifications(t,o){try{console.log("In handleNotifications"),"granted"===Notification.permission?await t("yes","notifications",o):"denied"===Notification.permission?await t("no","notifications",o):(await handleNotificationModal(),await getListenersForNotifications(t,o))}catch(t){const{default:o}=await import("../../../utils/error-messages/errorLogs.js");await o("handleNotificationsError.txt","Notifications error.",t)}}async function handleNotificationModal(){try{const t=await fetchData({api:getNotificationsAPI,token:getValidationToken()});"ok"===t.status&&openModal({content:t.msg})}catch(t){const{default:o}=await import("../../../utils/error-messages/errorLogs.js");await o("handleNotificationModalError.txt","Notifications modal error.",t)}}