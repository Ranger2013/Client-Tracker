// @ts-nocheck
import{getValidationToken}from"../../../tracker.js";import openModal from"../../../utils/modal/openModal.js";import{getInstallAppAPI}from"../../../utils/network/apiEndpoints.js";import{fetchData}from"../../../utils/network/network.js";import installApp from"./installApp.js";import updateUserSettings from"./updateUserSettings.js";export default async function handleInstallAppModal(t){console.log("In handleInstallAppModal");try{const e=await fetchData({api:getInstallAppAPI,token:getValidationToken()});console.log("In handleInstallAppModal: response: ",e),"ok"===e.status?(openModal({content:e.msg}),getListenersForInstall(t)):e.status}catch(t){const{default:e}=await import("../../../utils/error-messages/errorLogs.js");await e("handleInstallAppModalError.txt","App install modal error.",t)}}function getListenersForInstall(t){const e=document.getElementById("install-yes"),n=document.getElementById("install-no"),a=document.getElementById("install-never");e&&e.addEventListener("click",installApp),n&&n.addEventListener("click",(async()=>await updateUserSettings("no","installApp",t))),a&&a.addEventListener("click",(async()=>await updateUserSettings("never","installApp",t)))}