// @ts-nocheck
import{buildEle}from"../../../../../utils/dom/domUtils.js";import{addListener}from"../../../../../utils/event-listeners/listeners.js";import calculateTotalCost from"./calculateTotalCost.js";export default async function buildHorseListSelectElements({iterator:e,horseListOptions:t,farrierPricesOptions:s,accessoryOptions:i}){try{const l=e,a=buildEle({type:"div",myClass:["w3-row","w3-padding-small","w3-border-bottom","w3-margin-bottom"]}),o=buildEle({type:"div",myClass:["w3-col","m6"]}),r=buildEle({type:"label",attributes:{for:`horse-list-${l}`},text:"Horse's Name:"}),c=buildEle({type:"div",myClass:["w3-col","m6"]}),d=createSelectElement({id:`horse-list-${l}`,name:`horse_list_${l}`,title:"Select a Horse",options:t,nullOptionText:"-- Select Horse --"}),n=buildEle({type:"div",attributes:{id:`horse-list-${l}-error`}}),p=createSelectElement({id:`service-cost-${l}`,name:`service_cost_${l}`,title:"Type of Service",options:s}),u=createSelectElement({id:`accessories-${l}`,name:`accessories_${l}`,title:"Select the Accessories",options:i,nullOptionText:"-- Select Accessory --",multiple:!0,disabled:!0}),h=buildEle({type:"div",attributes:{id:`services-container-${l}`},myClass:["w3-padding-small","w3-hide"]});h.appendChild(p);const m=buildEle({type:"div",attributes:{id:`accessories-container-${l}`},myClass:["w3-padding-small","w3-hide"]});m.appendChild(u);const b=buildEle({type:"div",attributes:{id:`checkbox-container-${l}`},myClass:["w3-padding-small","w3-hide"],text:" Change price of your service."}),C=buildEle({type:"input",attributes:{id:`checkbox-cost-${l}`,name:`checkbox_cost_${l}`,type:"checkbox",value:"1",title:"Change cost of your service"},myClass:["w3-checkbox"]}),y=buildEle({type:"div",attributes:{id:`change-cost-container-${l}`},myClass:["w3-padding-small","w3-hide"]}),v=buildEle({type:"span",myClass:["w3-text-red","w3-small"],text:"This does not change the accessory cost."}),w=buildEle({type:"input",attributes:{id:`cost-change-${l}`,type:"number",title:"Change cost of selected service.",placeholder:"Change service cost",disabled:"disabled"},myClass:["w3-input","w3-border"]});return o.appendChild(r),c.appendChild(d),c.appendChild(n),c.appendChild(h),c.appendChild(m),b.prepend(C),c.appendChild(b),y.appendChild(v),y.appendChild(w),c.appendChild(y),a.appendChild(o),a.appendChild(c),addListener(p,"change",(async e=>{handleShowingAccessoriesSelect(e,m,u),await updateChangeCostInput({evt:e,changeCostInput:w}),await calculateTotalCost()})),addListener(u,"change",(async e=>{await calculateTotalCost()})),addListener(C,"change",(async e=>{y.classList.contains("w3-hide")?y.classList.remove("w3-hide"):y.classList.add("w3-hide"),w.disabled=!e.target.checked})),addListener(w,"input",(async e=>{await changeServiceCost({evt:e,serviceCostSelect:p}),await calculateTotalCost()})),a}catch(e){const{handleError:t}=await import("../../../../../utils/error-messages/handleError.js");t("showHorseListSelectElementsError","Show horse list select elements error: ",e,"We encountered an error. Unable to show the horse list select elements at this time.","form-msg")}}function createSelectElement({id:e,name:t,title:s,options:i,nullOptionText:l,multiple:a=!1,disabled:o=!1}){const r={id:e,name:t,title:s,required:"required",multiple:a?"multiple":void 0,disabled:o?"disabled":void 0};Object.keys(r).forEach((e=>void 0===r[e]&&delete r[e]));const c=buildEle({type:"select",attributes:r,myClass:["w3-input","w3-border"]});if(l){const e=buildEle({type:"option",attributes:{value:"null",disabled:"disabled",selected:"selected"},text:l});c.appendChild(e)}return i.forEach((e=>{const t=e.cloneNode(!0);c.appendChild(t)})),c}async function updateChangeCostInput({evt:e,changeCostInput:t}){try{document.querySelectorAll('select[id^="service-cost-"]');const s=e.target.value;t.value=s.split(":")[1]}catch(e){const{handleError:t}=await import("../../../../../utils/error-messages/handleError.js");await t("updateChangeCostInputError","Update change cost input error: ",e)}}async function changeServiceCost({evt:e,serviceCostSelect:t}){try{const s=e.target.value,i=t.options[t.selectedIndex].value.split(":")[0];t.options[t.selectedIndex].value=`${i}:${s}`}catch(e){const{handleError:t}=await import("../../../../../utils/error-messages/handleError.js");await t("changeServiceCostError","Change service cost error: ",e)}}function handleShowingAccessoriesSelect(e,t,s){t.classList.toggle("w3-hide",e.target.value.includes("trim")),s.disabled=e.target.value.includes("trim")}