// @ts-nocheck
import ManagePersonalNotes from"../../../../../../classes/ManagePersonalNotes.js";import{buildEle}from"../../../../../dom/domUtils.js";import{cleanUserOutput}from"../../../../../string/stringUtils.js";import buildSubmitDeleteButtonSection from"../../../../helpers/buildSubmitDeleteButtonSection.js";import buildTwoColumnTextareaSection from"../../../../helpers/buildTwoColumnTextareaSection.js";const buildNoteElements=(e,t)=>({block:buildEle({type:"div",myClass:["w3-padding","w3-border-bottom"],attributes:{id:`notes-block-${t+1}`}}),titleBlock:buildEle({type:"div",myClass:["w3-padding-small","w3-pointer","w3-light-grey"],attributes:{id:`notes-title-${t+1}`}}),form:buildEle({type:"form",myClass:["w3-hide"],attributes:{id:`notes-form-${t+1}`}}),hiddenFields:[buildEle({type:"input",attributes:{type:"hidden",name:"notesID",value:e.notesID}}),buildEle({type:"input",attributes:{type:"hidden",name:"date",value:e.date}})],message:buildEle({type:"div",myClass:["w3-center"],attributes:{id:`notes-msg-${t+1}`}}),spans:[buildEle({type:"span",myClass:["w3-bold"],text:"Notes: "}),buildEle({type:"span",text:e.notes.length>20?`${e.notes.substring(0,20)}...`:e.notes})]});export default async function buildPersonalNotesList(){try{const e=await(new ManagePersonalNotes).getPersonalNotes();if(!e?.length)return noPersonalNotes();const t=document.createDocumentFragment();return await Promise.all(e.map((async(e,s)=>{const o=buildNoteElements(e,s),[l,n]=await Promise.all([buildTwoColumnTextareaSection({labelText:"Notes: ",textareaID:`notes-${s+1}`,textareaName:"notes",textareaTitle:"Personal Notes",required:!0,textareaValue:cleanUserOutput(e.notes)}),buildSubmitDeleteButtonSection({submitButtonText:"Edit Notes",deleteButtonText:"Delete Notes"})]);o.titleBlock.append(...o.spans),o.form.append(o.message,...o.hiddenFields,l,n),o.block.append(o.titleBlock,o.form),t.append(o.block)}))),t}catch(e){const{handleError:t}=await import("../../../../../error-messages/handleError.js");await t("getPersonalNotesListError","Error getting personal notes list: ",e,"Unable to get the personal notes list. Please try again later.","page-msg")}}function noPersonalNotes(){return buildEle({type:"div",myClass:["w3-padding-small","w3-center"],text:"You do not have any notes."})}