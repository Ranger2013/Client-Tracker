// @ts-nocheck
export async function fetchData({api:t,data:r,json:e=!0,token:n=null,timeout:o=5e3}){const a={method:r?"POST":"GET",credentials:"include",headers:{},signal:AbortSignal.timeout(o)};n&&(a.headers.Authorization=`Bearer ${n}`),r&&(a.body=e?JSON.stringify(r):r),e&&r&&(a.headers["Content-Type"]="application/json");try{const r=await fetch(t,a),e=r.headers.get("content-type");if(-1!==e?.indexOf("application/json")){if(!r.ok){const t=await r.text();throw new Error(`Server error: ${t}`)}return await r.json()}throw new Error(`Invalid content type: ${e}`)}catch(t){if("TimeoutError"===t.name)throw new Error("REQUEST_TIMEOUT");if("TypeError"===t.name)throw new Error("NETWORK_ERROR");throw t}}export async function isOnline(){try{if((await fetch("/tracker/online.php")).ok)return!0;throw new Error("Network response was not ok.")}catch(t){return!1}}