// @ts-nocheck
export const staticCacheName="static-cache-v4";export const dynamicCacheName="dynamic-cache-v4";const noCache=["AJAX","sw","API","online","login","logout"];export async function cacheFirst(e){try{if("navigate"===e.request.mode){const t=await fetch(e.request,{redirect:"follow",credentials:"include"});return t.redirected?Response.redirect(t.url,303):t}const t=await caches.match(e.request);if(t)return t;try{const t=await fetch(e.request);if(t.ok){const a=await caches.open(dynamicCacheName);return await a.put(e.request,t.clone()),t}return handleFallback(e)}catch(t){return handleFallback(e)}}catch(e){return caches.match("/tracker/public/src/libs/trackerFallBackPage.php")}}export async function networkFirst(e){try{if("navigate"===e.request.mode){const t=await fetch(e.request,{redirect:"follow",credentials:"include"});return t.redirected?Response.redirect(t.url,303):t}const t=await fetch(e.request);if(t.redirected||t.status>=300&&t.status<400)return Response.redirect(t.url,303);if(t.ok){if(noCache.some((t=>e.request.url.includes(t))))return t;try{const a=await caches.open(dynamicCacheName);await a.put(e.request,t.clone())}catch(e){console.warn("Caching Error:",e)}return t}const a=await caches.match(e.request);return a||handleFallback(e)}catch(t){console.warn("Network Error:",t);const a=await caches.match(e.request);return a||handleFallback(e)}}async function handleFallback(e){try{const t=await caches.match(e.request);return t||("script"===e.request.destination?new Response("// Empty script fallback",{headers:{"Content-Type":"application/javascript"}}):caches.match("/tracker/public/src/libs/trackerFallBackPage.php"))}catch(e){return console.warn("Fallback Error:",e),new Response("Service Unavailable",{status:503,statusText:"Service Unavailable"})}}