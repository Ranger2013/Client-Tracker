// @ts-nocheck
import getBlockOfTime from"./getBlockOfTime.js";export default async function getProjectedAppointments({appointmentDate:e,trimCycle:t,clientInfo:n,scheduleOptions:i,manageClient:l}){try{let o=n?.cID||null;if(!(n?.trim_cycle||("null"!==t.options[t.selectedIndex].value?t.options[t.selectedIndex].value:null)))return null;const[s,c,r]=e.value.split("-"),a=new Date(s,c-1,r);a.setHours(0,0,0,0);const m=[7,14,21,28,35,42,49,56,63,70],g=[];for(const e of m){const t=new Date(a);t.setDate(a.getDate()-e);const n=t.toISOString().slice(0,10),s=await l.getClientScheduleByTrimDate(n);if(s&&s.length>0)for(const t of s){if(t.cID===o||"no"===t.active||t.trim_cycle!==e.toString())continue;const n=await l.getClientTrimmingInfo(t.cID);let s=t.horses?.length||1,c="";n?.trimmings?.length>0?s=n.trimmings[n.trimmings.length-1].horses.length:t.horses&&0!==t.horses.length||(c="New Client.");const r={client_name:t.client_name,city:t.city,num_horses:s,new_client:c,time_block:await getBlockOfTime({avgHorses:i.avg_horses,numberHorses:s,avgDriveTime:i.avg_drive_time})};g.push(r)}}return g.length>0?g:null}catch(e){throw e}}