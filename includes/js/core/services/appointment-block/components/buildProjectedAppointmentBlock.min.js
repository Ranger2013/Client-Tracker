// @ts-nocheck
import selectPage from"../../../navigation/services/selectPage.min.js";import{buildEle}from"../../../utils/dom/elements.min.js";import{addListener}from"../../../utils/dom/listeners.min.js";export default async function buildProjectedAppointmentBlock({appointmentContainer:e,data:t,date:n,manageClient:i,manageUser:r,componentId:l}){try{const a=buildEle({type:"div",myClass:["w3-blue","w3-padding-small"]}),s=buildEle({type:"h6",myClass:["w3-center"],text:`Projected Bookings for ${n}`});a.appendChild(s),t.forEach((e=>{console.log("in data foreach: obj: ",e);const t=buildEle({type:"a",myClass:["w3-underline"],attributes:{href:`/tracker/clients/appointments/?cID=${e.cID}&key=${e.primaryKey}`},text:e.client_name}),n=buildEle({type:"p",myClass:["w3-border-bottom","w3-padding-small"],text:` from ${e.city}<br>\n                ${e.new_client?"New Client.<br>":""}\n                Predicted services: ${formatServiceBreakdown(e.predicted_services)}<br>\n                Time Block: ${formatTimeBlock(e.time_block)}`});console.log("clientAnchor: ",t),addListener({elementOrId:t,eventType:"click",handler:async t=>selectPage({evt:t,page:"singleClient",cID:e.cID,primaryKey:e.primaryKey,manageClient:i,manageUser:r}),componentId:l}),n.prepend(t),a.appendChild(n)})),e.innerHTML="",e.appendChild(a)}catch(e){throw e}}function formatServiceBreakdown(e){const t=[];return e.trims>0&&t.push(`${e.trims} trim${e.trims>1?"s":""}`),e.halfSets>0&&t.push(`${e.halfSets} half set${e.halfSets>1?"s":""}`),e.fullSets>0&&t.push(`${e.fullSets} full set${e.fullSets>1?"s":""}`),t.join(", ")}function formatTimeBlock(e){const t=Math.floor(e/60),n=e%60;return`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`}