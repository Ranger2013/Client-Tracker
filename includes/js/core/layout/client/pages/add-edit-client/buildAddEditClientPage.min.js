// @ts-nocheck
import{buildEle}from"../../../../utils/dom/elements.js";import{trimCycleConfigurations}from"../../../../utils/dom/forms/trimCycleConfigurations.js";import{removeListeners}from"../../../../utils/dom/listeners.js";import{clearMsg}from"../../../../utils/dom/messages.js";import buildPageContainer from"../../../components/buildPageContainer.js";import buildSubmitButtonSection from"../../../components/buildSubmitButtonSection.js";import buildTwoColumnAddressSection from"../../../components/buildTwoColumnAddressSection.js";import buildTwoColumnInputSection from"../../../components/buildTwoColumnInputSection.js";import buildTwoColumnRadioButtonSection from"../../../components/buildTwoColumnRadioButtonSection.js";import buildTwoColumnSelectElementSection from"../../../components/buildTwoColumnSelectElementSection.js";export const COMPONENT_ID="add-edit-client";const fieldValues={client_name:"",street:"",city:"",state:"",zip:"",distance:"",phone:"",email:"",trim_cycle:"",trim_date:"",app_time:"",active:""};export default async function buildAddEditClientPage({cID:e=null,primaryKey:t=null,mainContainer:i,manageClient:n,manageUser:l}){try{clearMsg({container:"page-msg"});let u=null,a=null,o=null,p=null;if(e&&""!==e||t&&""!==t){const{default:i}=await import("./helpers/getClientInformation.js");u=await i({cID:e,primaryKey:t,fieldValues:fieldValues}),a=`/tracker/clients/appointments/?cID=${e}&key=${t}`,o=u.client_name,Object.keys(fieldValues).forEach((e=>{void 0!==u[e]&&(fieldValues[e]=u[e])})),p=await buildSubmitDeleteButtonSection({submitButtonText:"Edit Client",deleteButtonText:"Delete Client"})}else p=await buildSubmitButtonSection("Add Client");const r=u?"Edit ":"Add a new Client",[d,m]=await buildPageContainer({pageTitle:r,clientAnchor:a,clientName:o,cID:e,primaryKey:t}),s=buildEle({type:"form",attributes:{id:"client-form"}});(await Promise.all([buildTwoColumnInputSection({labelText:"Client Name:",inputID:"client-name",inputType:"text",inputName:"client_name",inputTitle:"Client Name",inputValue:fieldValues.client_name,required:"required"}),buildTwoColumnAddressSection("Address:","street",[{typeEle:"input",inputId:"street",inputType:"text",inputName:"street",inputTitle:"Street",inputClass:"w3-input w3-border w3-padding-small input",inputValue:fieldValues.street,required:"required"},{typeEle:"input",inputId:"city",inputType:"text",inputName:"city",inputTitle:"City",inputClass:"w3-input w3-border w3-padding-small input",inputValue:fieldValues.city,required:"required"},{typeEle:"input",inputId:"state",inputType:"text",inputName:"state",inputTitle:"State",inputClass:"w3-input w3-border w3-padding-small input",inputValue:fieldValues.state,required:"required"},{typeEle:"input",inputId:"zip",inputType:"text",inputName:"zip",inputTitle:"Zip Code (Optional)",inputClass:"w3-input w3-border w3-padding-small input",inputPattern:"[0-9]{5}",inputValue:fieldValues.zip,note:"Zip code is required for accepting credit card payments from your client."}]),buildTwoColumnInputSection({labelText:"Distance:",inputID:"distance",inputType:"number",inputName:"distance",inputTitle:"Total Distance to Client",inputValue:fieldValues.distance}),buildTwoColumnInputSection({labelText:"Client Phone#:",inputID:"phone",inputType:"tel",inputName:"phone",inputTitle:"Client Phone: xxx-xxx-xxxx",inputValue:fieldValues.phone,required:"required"}),buildTwoColumnInputSection({labelText:"Client Email:",inputID:"email",inputType:"email",inputName:"email",inputTitle:"Client Email",inputValue:fieldValues.email}),buildTwoColumnSelectElementSection({labelText:"Trimming/Shoeing Cycle:",selectID:"trim-cycle",selectName:"trim_cycle",selectTitle:"Trimming/Shoeing Cycle",options:trimCycleConfigurations(fieldValues),required:"required"}),buildTwoColumnInputSection({labelText:"Trimming/Shoeing Date:",inputID:"trim-date",inputName:"trim_date",inputType:"date",inputTitle:"Trimming/Shoeing Date",inputValue:fieldValues.trim_date,required:"required"}),buildTwoColumnInputSection({labelText:"Appointment Time:",inputID:"app-time",inputName:"app_time",inputType:"time",inputTitle:"Appointment Time",inputValue:fieldValues.app_time,required:"required"}),buildTwoColumnRadioButtonSection({labelText:"Active Status:",buttons:[{type:"radio",name:"active",value:"yes",labelText:"Yes",checked:"yes"===fieldValues.active||""===fieldValues.active?"checked":void 0},{type:"radio",name:"active",value:"no",labelText:"No",checked:"no"===fieldValues.active?"checked":void 0}]})])).forEach((e=>s.appendChild(e))),s.appendChild(p),m.appendChild(s),d.appendChild(m),i.innerHTML="",i.appendChild(d);const{default:c}=await import("../../../../../features/client/ui/add-edit-client/addEditClientJS.js");return await c({cID:e,primaryKey:t,clientInfo:u,manageClient:n,manageUser:l,componentId:COMPONENT_ID}),()=>removeListeners(COMPONENT_ID)}catch(e){const{AppError:t}=await import("../../../../errors/models/AppError.js");t.process(e,{errorCode:t.Types.RENDER_ERROR,userMessage:t.BaseMessages.system.render},!0)}}