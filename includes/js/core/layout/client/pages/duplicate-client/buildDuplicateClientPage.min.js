// @ts-nocheck
import{buildElementsFromConfig}from"../../../../utils/dom/elements.min.js";import{buildPageContainer,buildTwoColumnInputSection,buildTwoColumnSelectElementSection}from"../../../../utils/dom/forms/buildUtils.min.js";import{removeListeners}from"../../../../utils/dom/listeners.min.js";import{cleanUserOutput}from"../../../../utils/string/stringUtils.min.js";const COMPONENT="Build Duplicate Client Page",DEBUG=!1,debugLog=(...e)=>{false},COMPONENT_ID="duplicate-client",uniqueClients=new Set;export default async function buildDuplicateClientPage({mainContainer:e,manageClient:t,manageUser:i}){try{uniqueClients.clear(),debugLog();const n=await t.getClientScheduleList();debugLog();const l=n.filter((e=>uniqueClients.has(e.cID)?(debugLog(uniqueClients.has(e.cID)),!1):(debugLog(e.cID),uniqueClients.add(e.cID),!0))).map((e=>({value:`${e.primaryKey}:${cleanUserOutput(e.client_name)}`,text:`${cleanUserOutput(e.client_name)}`})));debugLog();const[[a,o],s,u]=await Promise.all([buildPageContainer({pageTitle:"Duplicate a Client"}),buildTwoColumnInputSection({labelText:"Filter Client List: ",inputID:"filter-client",inputType:"search",inputName:"filter_client",inputTitle:"Filter the client list by name"}),buildTwoColumnSelectElementSection({labelText:"Select Client: ",selectID:"select-client",selectName:"select_client",selectTitle:"Select the client to duplicate",options:[{value:"null",text:"-- Select a client --"},...l]})]);debugLog();const r={form:{type:"form",attributes:{id:"duplicate-form"}},filterRow:{type:"div",myClass:["w3-row","w3-padding-small"]},selectClientRow:{type:"div",myClass:["w3-row","w3-padding-small"]},clientContainer:{type:"div",attributes:{id:"client-container"}},pageNotesContainer:{type:"div",myClass:["w3-container"]},pageNotes:{type:"p",myClass:["w3-padding-small","w3-text-light-grey","w3-small"],text:"Duplicate a client in order to have multiple appointment bookings.<br>This is useful for barns that have a lot horses and you need to split up your appointments."}},{form:p,filterRow:c,selectClientRow:m,clientContainer:d,pageNotesContainer:C,pageNotes:g}=buildElementsFromConfig(r);c.appendChild(s),m.appendChild(u),C.appendChild(g),p.append(m,d),o.append(C,c,p),a.appendChild(o),e.innerHTML="",e.appendChild(a);const{default:b}=await import("../../../../../features/client/ui/duplicate-client/duplicateClientJS.js");return b({mainContainer:e,manageClient:t,manageUser:i,componentId:COMPONENT_ID}),()=>removeListeners(COMPONENT_ID)}catch(e){throw e}}