// @ts-nocheck
import{sortByDateOnly}from"../../../../../utils/date/dateUtils.js";import{buildEle,buildElementsFromConfig}from"../../../../../utils/dom/elements.js";import{cleanUserOutput}from"../../../../../utils/string/stringUtils.js";const PAGE_CONFIG={infoBlock:{type:"div",attributes:{id:"personal-notes-icon"},myClass:["w3-pointer","w3-hide"],text:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n\t\t\t  <circle cx="12" cy="12" r="10"></circle>\n\t\t\t  <line x1="12" y1="18" x2="12" y2="10"></line>\n\t\t\t  <line x1="12" y1="6" x2="12" y2="6"></line>\n\t\t </svg>'},notesBlock:{type:"div",attributes:{id:"personal-notes-block"},myClass:["w3-border-left","w3-borer-top","w3-borer-right","w3-hide","collapsed","slide-down"]}},NOTES_CONFIG={notesRow:{type:"div",myClass:["w3-row","w3-border-bottom"]},colOne:{type:"div",myClass:["w3-col","m3","w3-padding-small"]},colTwo:{type:"div",myClass:["w3-col","m9","w3-padding-small"]}};export default async function buildPersonalNotesSection({manageUser:t}){const e=document.createDocumentFragment();try{let o=null;const n=await t.getUserPersonalNotes(),r=buildElementsFromConfig(PAGE_CONFIG);return n.length>0&&(n.sort(((t,e)=>sortByDateOnly(t.date,e.date,!1))),o=buildNotesFromConfig(NOTES_CONFIG),r.append(...o)),e.append(r.infoBlock,r.notesBlock),e}catch(t){const{AppError:o}=await import("../../../../../errors/models/AppError.js");o.handleError(t,{errorCode:o.Types.RENDER_ERROR,userMessage:null});const n=buildEle({type:"div",myClass:["w3-center","w3-text-red"],text:"Error loading personal notes"});return e.append(n),e}}function buildNotesFromConfig({config:t,notes:e}){return e.map((e=>{const o=buildEle(t.notesRow),n=buildEle({...t.colOne,text:cleanUserOutput(e.date)}),r=buildEle({...t.colTwo,text:cleanUserOutput(e.note)});return o.append(n,r),o}))}