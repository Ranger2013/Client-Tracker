// @ts-nocheck
export default class EventRegistry{constructor(t){this.componentId=t,this.handlers=new Map}register(t,e,s){const n=`${e}:${t}`;return this.handlers.set(n,s),this}registerPrefix(t,e,s){return this.handlers.set(`prefix:${t}`,{eventTypes:e,handler:s}),this}handleEvent(t){const{type:e,target:s}=t,n=`${e}:${s.id}`;if(this.handlers.has(n))return this.handlers.get(n)(t),!0;for(const[n,r]of this.handlers.entries())if(n.startsWith("prefix:")){const i=n.slice(7);if(s.id.startsWith(i)&&r.eventTypes.includes(e)){const e=s.id.split(/-/g).pop();return r.handler(t,e),!0}}return!1}attach(t){const e="string"==typeof t?document.getElementById(t):t,s=new Set;for(const[t,e]of this.handlers.entries())t.startsWith("prefix:")?e.eventTypes.forEach((t=>s.add(t))):s.add(t.split(":")[0]);s.forEach((t=>{e.addEventListener(t,this.handleEvent.bind(this))}))}}