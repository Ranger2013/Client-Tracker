// @ts-nocheck
import selectPage from"./selectPage.js";const menuState={closeAll(e=null){const t=document.getElementById("mySidebar");t&&"sidebar"!==e&&t.classList.add("w3-hide");const a=document.querySelectorAll(".w3-dropdown-content"),s=document.querySelectorAll(".arrow");"dropdowns"!==e&&(a.forEach((e=>e.classList.remove("w3-show"))),s.forEach((e=>e.classList.remove("up"))))}};export const ROUTES={dynamic:{clients:{active:{id:["active-client-link"],page:"activeClients",access:"full"},inactive:{id:["inactive-client-link"],page:"inactiveClients",access:"full"},add:{id:["add-client-link"],page:"addClient",access:"full"},duplicate:{id:["duplicate-client-link"],page:"duplicateClient",access:"full"},deleteDuplicate:{id:["delete-duplicate-client-link"],page:"deleteDuplicateClient",access:"full"}},business:{mileage:{id:["add-mileage-link","add-mileage-link-small"],page:"addMileage",access:"full"},expenses:{add:{id:["add-expenses-link","add-expenses-link-small"],page:"addExpenses",access:"full"},edit:{id:["edit-expenses-link","edit-expenses-link-small"],page:"editExpenses",access:"full"}}},notes:{add:{id:["add-personal-notes-link","add-personal-notes-link-small"],page:"addPersonalNotes",access:"full"},edit:{id:["edit-personal-notes-link","edit-personal-notes-link-small"],page:"editPersonalNotes",access:"full"}}},controls:{mainMenu:{selector:".drop-menu",handler:"dropDownMenu"},sideBar:{id:"side-bar-navigation",handler:"sideBarNavigation"}},static:{settings:{dateTime:"/tracker/settings/date-time/",farrierPrices:"/tracker/settings/farrier-prices/",mileageCharges:"/tracker/settings/mileage-charges/",scheduleOptions:"/tracker/settings/schedule-options/",colorOptions:"/tracker/settings/color-options/"},reports:{income:"/tracker/reports/income/",expenses:"/tracker/reports/expenses/",mileage:"/tracker/reports/mileage/"},account:{userAccount:"/tracker/my-account/user-account/",dashboard:"/tracker/my-account/dashboard/",helpDesk:"/tracker/my-account/help-desk/"}}};const PAGE_MSG="page-msg";export default async function mainTrackerNavigation({manageUser:e,manageClient:t}){try{setupNavigationControls(),await setupRouteListeners({manageUser:e,manageClient:t})}catch(e){const{AppError:t}=await import("../../errors/models/AppError.js");await t.process(e,{errorCode:t.Types.NAVIGATION_ERROR,userMessage:"Failed to initialize navigation. Please contact support.",displayTarget:PAGE_MSG},!0)}}async function setupRouteListeners({manageUser:e,manageClient:t}){try{!function a(s){Object.entries(s).forEach((([s,n])=>{n.page&&n.id?n.id.forEach((a=>{const s=document.getElementById(a);s&&s.addEventListener("click",(async a=>{a.preventDefault(),await selectPage({evt:a,page:n.page,manageUser:e,manageClient:t})}))})):"object"==typeof n&&a(n)}))}(ROUTES.dynamic)}catch(e){const{AppError:t}=await import("../../errors/models/AppError.js");await t.process(e,{errorCode:t.Types.INITIALIZATION_ERROR,userMessage:"Failed to setup page navigation. Please refresh the page.",displayTarget:PAGE_MSG})}}function setupNavigationControls(){try{const e=document.getElementById("navigation");return e?(e.addEventListener("click",handleNavigationClick),!0):(console.warn("Navigation container not found"),!1)}catch(e){throw e}}const navHandlers={sidebar:()=>{document.querySelectorAll(".w3-dropdown-content:not(#mySidebar .w3-dropdown-content)").forEach((e=>{e.classList.remove("w3-show")})),document.querySelectorAll(".arrow:not(#mySidebar .arrow)").forEach((e=>{e.classList.remove("up")}));document.getElementById("mySidebar").classList.toggle("w3-hide")},mainDropdown:e=>{const t=e.dataset.target,a=document.getElementById("mySidebar");a&&!a.classList.contains("w3-hide")&&(a.classList.add("w3-hide"),document.querySelectorAll('#mySidebar [id^="dropSm"]').forEach((e=>{e.classList.remove("w3-show"),e.classList.add("w3-hide")}))),document.querySelectorAll(".w3-dropdown-content:not(#mySidebar .w3-dropdown-content)").forEach((e=>{e.id!==t&&e.classList.remove("w3-show")})),document.querySelectorAll(".arrow:not(#mySidebar .arrow)").forEach((e=>{const a=e.closest(".drop-menu");a&&a.dataset.target!==t&&e.classList.remove("up")}));const s=document.getElementById(t),n=e.querySelector(".arrow");s&&n&&(s.classList.toggle("w3-show"),n.classList.toggle("up"))},sidebarDropdown:e=>{const t=e.dataset.target;document.querySelectorAll('#mySidebar [id^="dropSm"]').forEach((e=>{e.id!==t&&(e.classList.remove("w3-show"),e.classList.add("w3-hide"))})),document.querySelectorAll("#mySidebar .arrow").forEach((e=>{const a=e.closest(".drop-menu");a&&a.dataset.target!==t&&e.classList.remove("up")}));const a=document.getElementById(t);if(a){a.classList.toggle("w3-show"),a.classList.toggle("w3-hide");const t=e.querySelector(".arrow");t&&t.classList.toggle("up")}}};function handleNavigationClick(e){if(e.target.closest("#side-bar-navigation"))return e.preventDefault(),void navHandlers.sidebar();const t=e.target.closest(".drop-menu");if(t){e.preventDefault();!!t.closest("#mySidebar")?navHandlers.sidebarDropdown(t):navHandlers.mainDropdown(t)}else;}