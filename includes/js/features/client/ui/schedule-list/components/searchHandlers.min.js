// @ts-nocheck
import{clearMsg}from"../../../../../core/utils/dom/messages.min.js";import{matchesDateSearch}from"./dateSearch.min.js";export async function handleSearch({evt:e,manageUser:t}){try{if(clearMsg({container:"page-msg"}),!e?.target?.value&&""!==e.target.value)throw new Error("Invalid event or missing target value");const a=document.getElementById("filter")?.value||"client-name",r=e.target.value.toLowerCase(),s=document.getElementById("appointment-list");if(!s)throw new Error("Could not find appointment-list element");const o=Array.from(s.getElementsByClassName("w3-row"));await Promise.all(o.map((async e=>{const s=e.querySelector(`[data-search-type="${a}"]`);if(!s)return;const o=s.dataset.searchValue,n="app-date"===a?await matchesDateSearch({searchText:r,searchValue:o,manageUser:t}):o.toLowerCase().includes(r);e.style.display=n?"":"none"})))}catch(e){const{AppError:t}=await import("../../../../../core/errors/models/AppError.min.js");t.process(e,{errorCode:t.Types.INITIALIZATION_ERROR,userMessage:"Search functionality not available at the moment."},!0)}}