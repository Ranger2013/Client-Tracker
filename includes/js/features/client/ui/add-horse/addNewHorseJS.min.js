// @ts-nocheck
import{createDebouncedHandler,getOptimalDelay}from"../../../../core/utils/dom/eventUtils.js";import{addListener}from"../../../../core/utils/dom/listeners.js";import{clearMsg,safeDisplayMessage}from"../../../../core/utils/dom/messages.js";import{handleAddHorseFormSubmission,handleHorseNameInput}from"./components/handleHorseNameInput.js";import clientAnchorNav from"../../../../core/navigation/components/setupClientAnchorListener.js";export default async function addNewHorse({cID:e,primaryKey:r,mainContainer:t,manageClient:n,manageUser:a,componentId:o}){try{await clientAnchorNav({manageUser:a,manageClient:n,componentId:o});const t=createDebouncedHandler((t=>{handleHorseNameInput({evt:t,cID:e,primaryKey:r,manageClient:n,componentId:o})}),getOptimalDelay("validation")),s={"input:horse-name":e=>{""!==e.target.value&&(safeDisplayMessage({elementId:"form-msg",message:"Processing...",isSuccess:!0,color:"w3-text-blue"}),document.getElementById("submit-button").disabled=!0),t(e)},"focusin:horse-name":e=>clearMsg({container:`${e.target.id}-error`,hide:!0,input:e.target}),"focusin:trim-cycle":e=>clearMsg({container:`${e.target.id}-error`,hide:!0,input:e.target}),"submit:add-horse-form":async t=>{t.preventDefault(),await handleAddHorseFormSubmission({evt:t,cID:e,primaryKey:r,manageClient:n,componentId:o})}};addListener({elementOrId:"card",eventType:["input","focusin","submit"],handler:e=>{const r=`${e.type}:${e.target.id}`;s[r]&&s[r](e)},componentId:o})}catch(e){const{AppError:r}=await import("../../../../core/errors/models/AppError.js");r.handleError(e,{errorCode:r.Types.INITIALIZATION_ERROR,userMessage:"An error occurred while initializing the add new horse page."})}}