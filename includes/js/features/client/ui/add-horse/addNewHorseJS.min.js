// @ts-nocheck
import{createDebouncedHandler,getOptimalDelay}from"../../../../core/utils/dom/eventUtils";import{addListener}from"../../../../core/utils/dom/listeners";import{clearMsg,safeDisplayMessage}from"../../../../core/utils/dom/messages";import{handleAddHorseFormSubmission,handleHorseNameInput}from"./components/handleHorseNameInput";export default async function addNewHorse({cID:e,primaryKey:n,mainContainer:r,manageClient:t,manageUser:a,componentId:o}){try{const{default:r}=await import("../../../../core/navigation/components/setupClientAnchorListener.js");await r({manageUser:a,manageClient:t,componentId:o});const s=createDebouncedHandler((r=>{handleHorseNameInput({evt:r,cID:e,primaryKey:n,manageClient:t,componentId:o})}),getOptimalDelay("validation"));addListener({elementOrId:"horse-name",eventType:"input",handler:e=>{""!==e.target.value&&(safeDisplayMessage({elementId:"form-msg",message:"Processing...",isSuccess:!0,color:"w3-text-blue"}),document.getElementById("submit-button").disabled=!0),s(e)},componentId:o}),addListener({elementOrId:"add-horse-form",eventType:"submit",handler:async r=>{r.preventDefault(),await handleAddHorseFormSubmission({evt:r,cID:e,primaryKey:n,manageClient:t,componentId:o})},componentId:o})}catch(e){const{AppError:n}=await import("../../../../core/errors/models/AppError.js");n.handleError(e,{errorCode:n.Types.INITIALIZATION_ERROR,userMessage:"An error occurred while initializing the add new horse page."})}}