// @ts-nocheck
import{createDebouncedHandler,getOptimalDelay}from"../../../../core/utils/dom/eventUtils.min.js";import{addListener}from"../../../../core/utils/dom/listeners.min.js";import{clearMsg,safeDisplayMessage}from"../../../../core/utils/dom/messages.min.js";import{handleAddHorseFormSubmission,handleHorseNameInput}from"./components/handleHorseNameInput.min.js";import clientAnchorNav from"../../../../core/navigation/components/setupClientAnchorListener.min.js";export default async function addNewHorse({cID:e,primaryKey:r,mainContainer:n,manageClient:t,manageUser:a,componentId:o}){try{await clientAnchorNav({manageUser:a,manageClient:t,componentId:o});const n=createDebouncedHandler((n=>{handleHorseNameInput({evt:n,cID:e,primaryKey:r,manageClient:t,componentId:o})}),getOptimalDelay("validation")),i={"input:horse-name":e=>{""!==e.target.value&&(safeDisplayMessage({elementId:"form-msg",message:"Processing...",isSuccess:!0,color:"w3-text-blue"}),document.getElementById("submit-button").disabled=!0),n(e)},"focusin:horse-name":e=>clearMsg({container:`${e.target.id}-error`,hide:!0,input:e.target}),"focusin:trim-cycle":e=>clearMsg({container:`${e.target.id}-error`,hide:!0,input:e.target}),"submit:add-horse-form":async n=>{n.preventDefault(),await handleAddHorseFormSubmission({evt:n,cID:e,primaryKey:r,manageClient:t,componentId:o})}};addListener({elementOrId:"card",eventType:["input","focusin","submit"],handler:e=>{const r=`${e.type}:${e.target.id}`;i[r]&&i[r](e)},componentId:o})}catch(e){const{AppError:r}=await import("../../../../core/errors/models/AppError.js");r.handleError(e,{errorCode:r.Types.INITIALIZATION_ERROR,userMessage:"An error occurred while initializing the add new horse page."})}}