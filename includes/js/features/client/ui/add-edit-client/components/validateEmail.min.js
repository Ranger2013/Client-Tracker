// @ts-nocheck
import{clearMsg}from"../../../../../core/utils/dom/messages.js";export default async function validateEmail({evt:e,primaryKey:a,manageClient:t}){try{if(!e.target.value)return void clearMsg({container:`${e.target.id}-error`,hide:!0,input:e.target});const r=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return e.target.value.match(r)?e.target.value&&await checkForDuplicateEmail({email:e.target.value,primaryKey:a,manageClient:t})?"Email is already in use.":void clearMsg({container:`${e.target.id}-error`,hide:!0,input:e.target}):"Please provide a valid email."}catch(e){throw e}}async function checkForDuplicateEmail({email:e,primaryKey:a,manageClient:t}){try{const r=await t.getClientScheduleList(),i=r?.some((t=>t.primaryKey!==parseInt(a,10)&&t.email===e));return i}catch(e){throw e}}