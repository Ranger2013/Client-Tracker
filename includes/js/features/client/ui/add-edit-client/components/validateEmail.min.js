// @ts-nocheck
import{clearMsg}from"../../../../../core/utils/dom/messages.min.js";export default async function validateEmail({evt:e,cID:a,primaryKey:t,manageClient:r}){try{if(!e.target.value)return void clearMsg({container:`${e.target.id}-error`,hide:!0,input:e.target});const i=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return e.target.value.match(i)?e.target.value&&await checkForDuplicateEmail({email:e.target.value,cID:a,primaryKey:t,manageClient:r})?"Email is already in use.":void clearMsg({container:`${e.target.id}-error`,hide:!0,input:e.target}):"Please provide a valid email."}catch(e){throw e}}async function checkForDuplicateEmail({email:e,cID:a,primaryKey:t,manageClient:r}){try{const t=await r.getClientScheduleList(),i=t?.some((t=>t.cID!==parseInt(a,10)&&t.email===e));return i}catch(e){throw e}}