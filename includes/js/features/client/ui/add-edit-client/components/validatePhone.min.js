// @ts-nocheck
import{formatPhone}from"../../../../../core/utils/dom/forms/validation.js";import{clearMsg}from"../../../../../core/utils/dom/messages.js";const COMPONENT="Validate Phone",DEBUG=!1,debugLog=(...e)=>{false};export default async function validatePhone({evt:e,cID:t,primaryKey:r,manageClient:a}){try{if(!e.target.value)return"Phone number is required.";const o=formatPhone(e.target.value);return o?(e.target.value=o,o&&await checkForDuplicateNumbers({phone:e.target.value,cID:t,primaryKey:r,manageClient:a})?"Phone number is not available.":void clearMsg({container:`${e.target.id}-error`,hide:!0,input:e.target})):"Please use the correct format."}catch(e){throw e}}async function checkForDuplicateNumbers({phone:e,cID:t,primaryKey:r,manageClient:a}){try{const r=await a.getClientScheduleList();return r.some((r=>r.cID!==parseInt(t,10)&&r.phone===e))}catch(e){throw e}}