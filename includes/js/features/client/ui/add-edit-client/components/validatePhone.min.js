// @ts-nocheck
import{clearMsg}from"../../../../../core/utils/dom/messages";export default async function validatePhone({evt:e,primaryKey:t,manageClient:r}){try{if(!e.target.value)return"Phone number is required.";const a=formatPhone(e.target.value);return a?(e.target.value=a,a&&await checkForDuplicateNumbers({phone:e.target.value,primaryKey:t,manageClient:r})?"Phone number is not available.":void clearMsg({container:`${e.target.id}-error`,hide:!0,input:e.target})):"Please use the correct format."}catch(e){throw e}}function formatPhone(e){let t=(""+e).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return t?`${t[1]}-${t[2]}-${t[3]}`:null}async function checkForDuplicateNumbers({phone:e,primaryKey:t,manageClient:r}){try{const a=await r.getClientScheduleList();return a.some((r=>r.primaryKey!==parseInt(t,10)&&r.phone===e))}catch(e){throw e}}