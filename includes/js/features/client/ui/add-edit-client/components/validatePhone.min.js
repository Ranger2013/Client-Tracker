// @ts-nocheck
import{clearMsg}from"../../../../../core/utils/dom/messages";const COMPONENT="Validate Phone",DEBUG=!1,debugLog=(...e)=>{false};export default async function validatePhone({evt:e,cID:t,primaryKey:a,manageClient:r}){try{if(!e.target.value)return"Phone number is required.";const n=formatPhone(e.target.value);return n?(e.target.value=n,n&&await checkForDuplicateNumbers({phone:e.target.value,cID:t,primaryKey:a,manageClient:r})?"Phone number is not available.":void clearMsg({container:`${e.target.id}-error`,hide:!0,input:e.target})):"Please use the correct format."}catch(e){throw e}}function formatPhone(e){let t=(""+e).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return t?`${t[1]}-${t[2]}-${t[3]}`:null}async function checkForDuplicateNumbers({phone:e,cID:t,primaryKey:a,manageClient:r}){try{const a=await r.getClientScheduleList();return a.some((a=>a.cID!==parseInt(t,10)&&a.phone===e))}catch(e){throw e}}