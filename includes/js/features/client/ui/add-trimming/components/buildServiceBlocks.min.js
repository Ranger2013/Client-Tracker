// @ts-nocheck
import{buildEle,buildElementsFromConfig}from"../../../../../core/utils/dom/elements.min.js";import createSelectElement from"../../../../../core/utils/dom/forms/createSelectElement.min.js";const COMPONENT="buildServiceBlocks",DEBUG=!0,debugLog=(...e)=>{console.log(`[${COMPONENT}]`,...e)};export default async function buildServiceBlocks({iterator:e,clientTrimCycle:t,horseListOptions:s,farrierPricesOptions:o,accessoryOptions:r}){try{const t=e,i={row:{type:"div",myClass:["w3-row","w3-padding-small","w3-border-bottom","w3-margin-bottom"]},firstCol:{type:"div",myClass:["w3-col","m6"]},firstColLabel:{type:"label",attributes:{for:`horse-list-${t}`},text:"Horse's Name:"},secondCol:{type:"div",myClass:["w3-col","m6"]},horseListSelectError:{type:"div",attributes:{id:`horse-list-${t}-error`}},servicesContainer:{type:"div",attributes:{id:`services-container-${t}`},myClass:["w3-padding-small","w3-hide"]},accessoriesContainer:{type:"div",attributes:{id:`accessories-container-${t}`},myClass:["w3-padding-small","w3-hide"]},changeCostCheckboxContainer:{type:"label",attributes:{id:`checkbox-container-${t}`,for:`checkbox-cost-${t}`},myClass:["w3-padding-small","w3-hide"],text:" Change price of your service."},changeCostCheckbox:{type:"input",attributes:{id:`checkbox-cost-${t}`,name:`checkbox_cost_${t}`,type:"checkbox",value:"1",title:"Change cost of your service"},myClass:["w3-checkbox"]},changeCostInputContainer:{type:"div",attributes:{id:`change-cost-container-${t}`},myClass:["w3-padding-small","w3-hide"]},changeCostSpan:{type:"span",myClass:["w3-text-red","w3-small"],text:"This does not change the accessory cost."},changeCostInput:{type:"input",attributes:{id:`cost-change-${t}`,type:"number",title:"Change cost of selected service.",placeholder:"Change service cost",disabled:"disabled"},myClass:["w3-input","w3-border"]}};debugLog("In buildServiceBlocks: horseListOptions: ",s),debugLog("In buildServiceBlocks: farrierPricesOptions: ",o);const c=buildElementsFromConfig(i),{row:a,firstCol:n,firstColLabel:l,secondCol:d}=c,{horseListSelectError:p,servicesContainer:u,accessoriesContainer:h}=c,{changeCostCheckboxContainer:C,changeCostCheckbox:m,changeCostInputContainer:g,changeCostSpan:b,changeCostInput:y}=c,v=createSelectElement({id:`horse-list-${t}`,name:`horse_list_${t}`,title:"Select a Horse",options:s,required:!0}),w=createSelectElement({id:`service-cost-${t}`,name:`service_cost_${t}`,title:"Type of Service",options:o,required:!0}),E=createSelectElement({id:`accessories-${t}`,name:`accessories_${t}`,title:"Select the Accessories",options:r,nullOptionText:"-- Select Accessory --",multiple:!0,disabled:!0});return u.appendChild(w),h.appendChild(E),C.prepend(m),g.append(b,y),n.appendChild(l),d.append(v,p,u,h,C,g),a.append(n,d),a}catch(e){const{AppError:t}=await import("../../../../../core/errors/models/AppError.min.js");t.process(e,{errorCode:t.Types.RENDER_ERROR,userMessage:null,displayTarget:"number-horses-error"},!0)}}async function updateChangeCostInput({evt:e,changeCostInput:t}){try{debugLog("In updateChangeCostInput: SHOULD NOT BE HERE");document.querySelectorAll('select[id^="service-cost-"]');const s=e.target.value;t.value=s.split(":")[1]}catch(e){const{handleError:t}=await import("../../../../../utils/error-messages/handleError.js");await t("updateChangeCostInputError","Update change cost input error: ",e)}}async function changeServiceCost({evt:e,serviceCostSelect:t}){try{const s=e.target.value,o=t.options[t.selectedIndex].value.split(":")[0];t.options[t.selectedIndex].value=`${o}:${s}`}catch(e){const{handleError:t}=await import("../../../../../utils/error-messages/handleError.js");await t("changeServiceCostError","Change service cost error: ",e)}}function handleShowingAccessoriesSelect(e,t,s){t.classList.toggle("w3-hide",e.target.value.includes("trim")),s.disabled=e.target.value.includes("trim")}