// @ts-nocheck
import{buildGenericSelectOptions}from"../../../../../core/utils/dom/elements.min.js";import{ucwords,underscoreToSpaces}from"../../../../../core/utils/string/stringUtils.min.js";import buildServiceBlocks from"./buildServiceBlocks.min.js";const COMPONENT="AutoFillHorseList",DEBUG=!1,debugLog=(...e)=>{false},optionsCache=new Map;export default async function autoFillHorseList({totalHorses:e,optionsConfig:r}){try{debugLog();const s=document.createDocumentFragment(),o=(e,r)=>{debugLog();const s=JSON.stringify(e);return optionsCache.has(s)||optionsCache.set(s,buildGenericSelectOptions(e)),optionsCache.get(s)},t={horseList:o(r.horseListOptionsConfig,"horseList"),farrierPrices:o(r.farrierPricesOptionsConfig,"farrierPrices"),accessories:o(r.accessoryOptionsConfig,"accessories")};debugLog();return(await Promise.all(Array.from({length:e},(async(e,r)=>{const s=r+1,o=await buildServiceBlocks({iterator:s,horseListOptions:t.horseList,farrierPricesOptions:t.farrierPrices,accessoryOptions:t.accessories});debugLog();const i=o.querySelector(`#horse-list-${s}`);debugLog();const c=o.querySelector(`#services-container-${s}`),n=o.querySelector(`#checkbox-container-${s}`);i.selectedIndex=r;const a=o.querySelector(`label[for="horse-list-${s}"]`),l=i.options[i.selectedIndex],d=l.dataset.serviceType,u=l.dataset.trimCycle;return a.innerHTML=`Horse's Name: <span class="w3-small">${ucwords(underscoreToSpaces(d))} Cycle: ${u/7} weeks</span>`,[c,n].forEach((e=>e?.classList.remove("w3-hide"))),o})))).forEach((e=>s.appendChild(e))),Array.from(s.children)}catch(e){const{AppError:r}=await import("../../../../../core/errors/models/AppError.min.js");return r.handleError(e,{errorCode:r.Types.INITIALIZATION_ERROR,userMessage:"We encountered an error auto-filling the horse list.",displayTarget:"form-msg"}),document.getElementById("submit-button").disabled=!0,optionsCache.clear(),[]}}window.addEventListener("unload",(()=>optionsCache.clear()));