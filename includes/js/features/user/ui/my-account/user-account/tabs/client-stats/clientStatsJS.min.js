// @ts-nocheck
import selectPage from"../../../../../../../core/navigation/services/selectPage.js";import{getValidElement}from"../../../../../../../core/utils/dom/elements.js";import{addListener}from"../../../../../../../core/utils/dom/listeners.js";const COMPONENT="Client Stats Page",DEBUG=!1,debugLog=(...e)=>{false};let cleanup=null;export default async function clientStats({tabContentContainer:e,componentId:t,manageUser:a,manageClient:s}){try{const n={widget:{values:["overview","horse-types"],useValue:!0},horses:{values:!0,useValue:!1},component:{values:["client-navigation"],useValue:!0}},r={"click:overview":e=>{e.preventDefault(),toggleSection({evt:e,dataSection:"horse-types"})},"click:horse-types":e=>{e.preventDefault(),toggleSection({evt:e,dataSection:"overview"})},"click:horses":async t=>{const{default:a}=await import("../../../../../../../core/layout/user/pages/my-account/client-stats/components/buildClientsByHorseCount.js");cleanup=await a({evt:t,tabContentContainer:e,manageClient:s})},"click:client-navigation":async e=>{e.preventDefault(),await selectPage({evt:e,page:"singleClient",cID:e.target.dataset.clientid,closeMenu:!0,primaryKey:e.target.dataset.primarykey,manageUser:a,manageClient:s})}};addListener({elementOrId:"tab-content-container",eventType:["click"],handler:async e=>{console.log("Clean up: ",cleanup),cleanup&&(cleanup(),cleanup=null);try{let t=null,a=null,s=!1;for(const[r,o]of Object.entries(n))if(void 0!==e.target.dataset[r]){const n=e.target.dataset[r],i=o.values;if(!0===i||Array.isArray(i)&&i.includes(n)){t=r,a=n,s=o.useValue;break}}if(t){const n=s?a:t,o=`${e.type}:${n}`;r[o]&&await r[o](e)}}catch(e){const{AppError:t}=await import("../../../../../../../core/errors/models/AppError.js");t.handleError(e,{errorCode:t.Types.INITIALIZATION_ERROR,userMessage:t.BaseMessages.system.initialization,displayTarget:"form-msg"})}},componentId:t})}catch(e){const{AppError:t}=await import("../../../../../../../core/errors/models/AppError.js");t.handleError(e,{errorCode:t.Types.INITIALIZATION_ERROR,userMessage:t.BaseMessages.system.initialization,displayTarget:"form-msg"})}}function toggleSection({evt:e,dataSection:t}){const a=e.target.dataset.widget,s=document.querySelector(`[data-widget="${a}"]`),n=document.querySelector(`[data-widget="${t}"]`),r=getValidElement(`${a}-container`),o=getValidElement(`${t}-container`);s.classList.add("w3-blue-grey"),n.classList.remove("w3-blue-grey"),r.classList.remove("w3-hide"),o.classList.add("w3-hide")}