// @ts-nocheck
import{authAPI}from"../../../../core/network/api/apiEndpoints.js";import{fetchData}from"../../../../core/network/services/network.js";import{clearMsg,safeDisplayMessage}from"../../../../core/utils/dom/messages.js";import{top}from"../../../../core/utils/window/scroll.js";export async function getTerms(e){try{const s=await fetchData({api:authAPI.terms,data:{type:e}}),{default:r}=await import("../../../../core/services/modal/openModal.js");if(!s.message)throw new Error("Unable to load terms content");r({content:s.message})}catch(e){const[{default:s},{AppError:r}]=await Promise.all([import("../../../../core/services/modal/openModal.js"),import("../../../../core/errors/models/AppError.js")]);s({content:'\n                <div class="w3-container w3-center">\n                    <h4 class="w3-text-red">Error</h4>\n                    <p>Unable to load content. Please try again later.</p>\n                </div>\n            '}),r.handleError(e,{errorCode:r.Types.RENDER_ERROR,userMessage:r.BaseMessages.system.render})}}export async function handleUserRegistration(e){e.preventDefault();const s=document.getElementById("form-container");try{safeDisplayMessage({elementId:"form-msg",message:"Registering...",color:"w3-text-blue",isSuccess:!0});const r=Object.fromEntries(new FormData(e.target));top();const t=await fetchData({api:authAPI.register,data:r});if("ok"===t.status)clearMsg({container:"form-msg"}),safeDisplayMessage({elementId:s,message:t.msg,color:"w3-text-black",isSuccess:!0});else if("form-errors"===t.status){const{default:e}=await import("../../../../core/utils/dom/forms/displayFormValidationErrors.js");e(t.errors)}else"error"===t.status||"server-error"===t.status?safeDisplayMessage({elementId:"form-msg",message:t.msg}):safeDisplayMessage({elementId:"form-msg",message:"Uknown Error. Please try again later."})}catch(e){const[s,r]=await Promise.all([import("../../../../core/errors/services/errorProcessor.js"),import("../../../../core/errors/constants/errorMessages.js")]);await s(e,{context:"registration",defaultMessage:"Unable to complete registration. Please try again later.",errorElement:"form-msg",handlers:{NetworkError:()=>safeDisplayMessage({elementId:"form-msg",message:r.networkError}),AppError:e=>safeDisplayMessage({elementId:"form-msg",message:e.userMessage})}})}}