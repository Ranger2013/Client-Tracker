// @ts-nocheck
// @ts-nocheck
// @ts-nocheck
// @ts-nocheck
// @ts-nocheck
// @ts-nocheck
// @ts-nocheck
// @ts-nocheck
// @ts-nocheck
import{authAPI}from"../../../../core/network/api/apiEndpoints.js";import{fetchData}from"../../../../core/network/services/network.js";import{clearMsg,safeDisplayMessage}from"../../../../core/utils/dom/messages.js";import{top}from"../../../../core/utils/window/scroll.js";export async function getTerms(e){try{const r=await fetchData({api:authAPI.terms,data:{type:e}}),{default:s}=await import("../../../../core/services/modal/openModal.js");if(!r.message)throw new Error("Unable to load terms content");s({content:r.message})}catch(e){const[{default:r},{AppError:s}]=await Promise.all([import("../../../../core/services/modal/openModal.js"),import("../../../../core/errors/models/AppError.js")]);r({content:'\n                <div class="w3-container w3-center">\n                    <h4 class="w3-text-red">Error</h4>\n                    <p>Unable to load content. Please try again later.</p>\n                </div>\n            '}),s.handleError(e,{errorCode:s.Types.RENDER_ERROR,userMessage:s.BaseMessages.system.render})}}export async function handleUserRegistration(e){e.preventDefault();const r=document.getElementById("form-container");try{safeDisplayMessage({elementId:"form-msg",message:"Registering...",color:"w3-text-blue",isSuccess:!0});const s=Object.fromEntries(new FormData(e.target));top();const t=await fetchData({api:authAPI.register,data:s});if("ok"===t.status)clearMsg({container:"form-msg"}),safeDisplayMessage({elementId:r,message:t.msg,color:"w3-text-black",isSuccess:!0});else if("form-errors"===t.status){const{default:e}=await import("../../../../core/utils/dom/forms/displayFormValidationErrors.js");e(t.errors)}else"error"===t.status||"server-error"===t.status?safeDisplayMessage({elementId:"form-msg",message:t.msg}):safeDisplayMessage({elementId:"form-msg",message:"Uknown Error. Please try again later."})}catch(e){const{AppError:r}=await import("../../../../core/errors/models/AppError.js");r.handleError(e,{errorCode:r.Types.FORM_SUBMISSION_ERROR,userMessage:"Unable to complete registration. Please try again later.",displayTarget:"form-msg"})}}